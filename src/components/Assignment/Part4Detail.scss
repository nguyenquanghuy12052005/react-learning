$blue-header: #0096fa;
$green-header: #2ecf5e;
$bg-color: #eef1f4;

.part4-detail-page {
  height: 100vh; 
  display: flex;
  flex-direction: column;
  background-color: $bg-color;
  font-family: 'Segoe UI', sans-serif;
  overflow: hidden;

  // HEADER & FOOTER giữ nguyên
  .quiz-header { flex-shrink: 0; height: 60px; background: white; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); z-index: 10; .header-left { display: flex; align-items: center; gap: 15px; font-weight: 600; font-size: 1.1rem; .back-icon { color: #333; }} .header-right { display: flex; align-items: center; gap: 20px; .timer { color: #ff4d4f; font-weight: bold; display: flex; align-items: center; gap: 5px; } .sidebar-toggle { color: #551fff; cursor: pointer; font-weight: 500;} .icon-btn { cursor: pointer; color: #555; font-size: 1.1rem;} } }
  .quiz-footer { flex-shrink: 0; background: white; border-top: 1px solid #eee; padding: 10px 30px; z-index: 20; .audio-row-top { display: flex; align-items: center; gap: 20px; margin-bottom: 5px; .audio-controls { display: flex; gap: 15px; .btn-play { background:none; border:none; font-size:1.2rem; cursor: pointer; width: 30px;}} .audio-progress { flex: 1; display: flex; align-items: center; gap: 10px; input { flex:1; height:4px; accent-color: $blue-header; cursor: pointer;}} } .audio-row-bottom { display: flex; justify-content: space-between; padding-top: 5px; border-top: 1px solid #f9f9f9; .nav-arrow { background: none; border:none; cursor: pointer; font-size: 1.1rem; &:disabled{opacity:0.3;}} .center-icons { display: flex; gap: 30px; color: #666; cursor: pointer;} } }

  // --- BODY ---
  .quiz-body {
    flex: 1; 
    overflow: hidden;
    padding: 20px;
    display: flex; 
    justify-content: center;
    align-items: center;

    .content-wrapper {
        width: 100%;
        max-width: 1200px;
        height: 100%;
        display: flex;
        gap: 20px;

        // --- CARD CÂU HỎI ---
        .scrollable-question-card {
            flex: 1;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            height: 100%;
            overflow-y: auto;
            
            &::-webkit-scrollbar { width: 8px; }
            &::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
            &::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
            &::-webkit-scrollbar-thumb:hover { background: #bbb; }

            .questions-inner {
                padding: 20px;
                display: flex; flex-direction: column; gap: 25px; // Tăng khoảng cách giữa các câu

                .question-block {
                   // Khôi phục style cho khối câu hỏi
                   border: 1px solid #eee;
                   border-radius: 8px;
                   overflow: hidden; // Để header không bị tràn ra ngoài bo góc

                   // --- HEADER MÀU XANH DƯƠNG (ĐÃ SỬA LẠI) ---
                   .panel-header.blue-header {
                       background: $blue-header; // Nền xanh
                       color: white; // Chữ trắng
                       padding: 12px 15px;
                       font-weight: 600;
                       font-size: 1rem;
                   }

                   .options-list {
                       padding: 15px; // Thêm padding cho phần đáp án
                       display: flex; flex-direction: column; gap: 10px;
                       .option-item {
                           display: flex; align-items: flex-start; gap: 12px;
                           padding: 12px; border-radius: 8px; cursor: pointer;
                           border: 1px solid transparent; // Viền trong suốt mặc định
                           background-color: #f9f9f9; // Nền xám nhẹ cho đáp án
                           transition: 0.2s;
                           
                           &:hover { background-color: #f0f8ff; border-color: $blue-header; }
                           
                           &.selected { 
                               background-color: rgba($blue-header, 0.1); 
                               border-color: $blue-header; 
                               .radio-circle { border-color: $blue-header; .dot { background: $blue-header; } } 
                           }
                           
                           .radio-circle { width: 18px; height: 18px; border: 2px solid #ccc; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-top: 3px; flex-shrink: 0; .dot { width: 8px; height: 8px; background: currentColor; border-radius: 50%; } }
                           .opt-text { font-size: 0.95rem; color: #333; line-height: 1.4; }
                       }
                   }
                }
            }
        }

        // --- LAYOUT LOGIC ---
        &.layout-center {
            justify-content: center;
            .scrollable-question-card { max-width: 800px; }
        }

        &.layout-split {
            // KHUNG ẢNH (BÊN TRÁI)
            .static-panel-graphic {
                flex: 0.8;
                background: white; border-radius: 12px; 
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
                display: flex; flex-direction: column; overflow: hidden;
                
                .panel-header.green-header {
                    background: $green-header; color: white; padding: 12px 20px; font-weight: 600;
                    display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;
                }
                .graphic-image-container {
                    flex: 1; background: #000; display: flex; align-items: center; justify-content: center; overflow: hidden;
                    img { max-width: 100%; max-height: 100%; object-fit: contain; }
                }
            }
        }
    }

    // Sidebar
    .column-sidebar {
        width: 250px; background:white; border-radius:12px; margin-left:20px; height: 100%;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08); padding: 20px;
    }
  }

  // Mobile Response
  @media (max-width: 900px) {
     .quiz-body {
         padding: 10px;
         .content-wrapper.layout-split {
             flex-direction: column;
             overflow-y: auto;
             .static-panel-graphic { height: 300px; flex: none; }
             .scrollable-question-card { height: auto; overflow: visible; }
         }
         .column-sidebar { display: none; }
     }
  }
}